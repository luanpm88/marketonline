    <!-- Menu Toggle Script -->
    {literal}
	
	<script type="text/javascript">
	    <!--
	    (function() {
		if ("-ms-user-select" in document.documentElement.style && navigator.userAgent.match(/IEMobile/)) {
		    var msViewportStyle = document.createElement("style");
		    msViewportStyle.appendChild(
			document.createTextNode("@-ms-viewport{width:auto!important}")
		    );
		    document.getElementsByTagName("head")[0].appendChild(msViewportStyle);
		}
	    })();
	    //-->
	</script>
    
        <script>
	    function scrollTopSearch() {
		
	    }
	    
	    //--------------TOP SEARCH ACTIONS------------------------//
	    function hideSearch() {
		$('.top-search-result-box').hide();
		    
		$('.wrapper-search').hide();
		$('.wrapper-inner').show();
	    }
	    
	    function showSearch() {
		$('.top-search-result-box').show();
		    
		$('.wrapper-search').show();
		$('.wrapper-inner').hide();
	    }
	    
	    var keytimeout;
	    function goSearch() {
		if ($('.top-search-input').val().trim() != '') {
		    $(document).scrollTop(0);
		    
		    $('.top-search-result-box .panel-body').html('<div class="no-search-top search-loading">Loading</div>');
		    showSearch();
		    
		    clearTimeout(keytimeout);
		
		    keytimeout = setTimeout(function(){
			fullTextSearch( $('.top-search-input').val() );
		    }, 500);
		    
		} else {
		    hideSearch();
		}
	    }
	    
	    //full text search
	    var fullTextSearch_xhr;
	    function fullTextSearch(keyword) {
		var search_type = $('.top-search-type').attr("rel");
		
		if(fullTextSearch_xhr && fullTextSearch_xhr.readystate != 4){
		    fullTextSearch_xhr.abort();
		}
	    
		    fullTextSearch_xhr = $.ajax({
			url: ROOT_URL+"index.php?do=product&action=ajaxModernSearch&type="+search_type+"&keyword="+encodeURIComponent(keyword)
		    }).done(function ( data ) {
			if( console && console.log ) {
			    
			    $('.top-search-result-box .panel-body').html(data);
			    
			}
		    });
	    }
	    //=================================================//
	    
	    
            
            function getCartCount() {
                $.ajax({
		    url: ROOT_URL+"index.php?do=product&action=ajaxTopCart&mobile=1",
		}).done(function ( data ) {
		    if( console && console.log ) {
			
			//$('.cat-filter-items').html(html);
                        $('.count_badge_outer .badge').html("");
                        if(data!="0") {
                            $('.count_badge_outer .badge').html(data);
                        }

		    }
		});
            }
            
            function prevSlide() {
                var num = $('.mobile-product-gallery ul li').length;                
                var current = $('.mobile-product-gallery ul li.active').attr("rel");
                
                if (current == 0) {
                    gotoSlide(num-1);
                } else {
                    gotoSlide(parseInt(current)-1);
                }
            }
            
            function nextSlide() {
                var num = $('.mobile-product-gallery ul li').length;                
                var current = $('.mobile-product-gallery ul li.active').attr("rel");
                
                if (current == num-1) {
                    gotoSlide(0);
                } else {
                    gotoSlide(parseInt(current)+1);
                }
            }
            
            function gotoSlide(num) {
                var current = $('.mobile-product-gallery ul li.active').attr("rel");
                //alert(current);
                
                $('.mobile-product-gallery ul li[rel="'+current+'"]').hide();
                $('.mobile-product-gallery ul li[rel="'+current+'"]').removeClass("active");
                $('.mobile-product-gallery .pointers .pointer[rel="'+current+'"]').removeClass("active");
                
                $('.mobile-product-gallery ul li[rel="'+num+'"]').fadeIn();
                $('.mobile-product-gallery ul li[rel="'+num+'"]').addClass("active");
                $('.mobile-product-gallery .pointers .pointer[rel="'+num+'"]').addClass("active");
            }
            
            function initMobileGallery() {
                var num = $('.mobile-product-gallery ul li').length;
                
                $('.mobile-product-gallery ul li').each(function(index) {
                    $(this).attr("rel",index);
                });
                
                $('.mobile-product-gallery ul li').hide();
                $('.mobile-product-gallery ul li').removeClass("active");
                $('.mobile-product-gallery ul li').eq(0).fadeIn();
                $('.mobile-product-gallery ul li').eq(0).addClass("active");
                
                var html_point = '<div class="pointers">';
                for(var i=0;i<num;i++) {
                    html_point += '<span rel="'+i+'" class="pointer pointer-'+i+'"></span>';
                }
                html_point += '</div>';
                
                //for pointer left right
                html_point += '<span class="glyphicon glyphicon-chevron-right pointer-right"></span><span class="glyphicon glyphicon-chevron-left pointer-left"></span>';
                
                $('.mobile-product-gallery').append(html_point);
                $('.mobile-product-gallery .pointers .pointer').eq(0).addClass("active");
                
                
                //MobileGallery
                    $(".mobile-product-gallery").swipe( {
                      //Generic swipe handler for all directions
                      allowPageScroll: "vertical",
                      swipe:function(event, direction, distance, duration, fingerCount, fingerData) {
                        if(direction == 'right') {
                          prevSlide();
                        }
                        if(direction == 'left') {
                          nextSlide();
                        }
                      },
                      //Default is 75px, set to 0 for demo so any distance triggers swipe
                       threshold: 0,
                       excludedElements: ""
                    });
                
                $("body").on("click",".pointer-right",function() {
                    nextSlide();
                });
                $("body").on("click",".pointer-left",function() {
                    prevSlide();
                });
                
            }
            
            function autoresizeMobileGallery() {
                var size = $(window).height()-100;
                
                if (size > $(window).width()-20) {
                    size = $(window).width()-20;
                }
                
                $('.mobile-product-gallery ul li').width(size);
                $('.mobile-product-gallery ul li').height(size);
                $('.mobile-product-gallery ul li').css("line-height",size+"px");
            }
            
            function moveLeft(box) {
                var current_left = parseInt(box.css('left'));
                var amount = 155*2;
                box.css('left', (current_left-amount)+'px');
            }
            
            function moveRight(box) {
                var current_left = parseInt(box.css('left'));
                var amount = 155*2;
                if(current_left<0) {
                    box.css('left', (current_left+amount)+'px');
                }
            }
            
            function cropping() {
		jQuery('.crop-img-square').each(function() {
		    var scale = 1;
		    jQuery(this).css('display','block');
		    jQuery(this).find('img').css('display','none');
		    jQuery(this).css('height',jQuery(this).width()*scale);
		    
		    jQuery(this).css('background-image','url('+jQuery(this).find('img').attr("src")+')');
		    if(jQuery(this).find('img').width()*scale < jQuery(this).find('img').height()) {
		      jQuery(this).css('background-size',jQuery(this).width()+'px auto');
		    } else {
		      jQuery(this).css('background-size','auto '+jQuery(this).height()+'px');
		    }
		    jQuery(this).css('background-repeat','no-repeat');
		    jQuery(this).css('background-position','center center');
		});       
            }
            
            
            $(window).resize(function() {
                cropping();
                autoresizeMobileGallery();
            });
	    
	    function blurSearchInput() {
		if($(document).scrollTop()>50) $("#search-panel input").blur();
	    }
	    $(document).scroll(function() {
                setTimeout("blurSearchInput();",1000);
            });
	    
            var ROOT_URL = "{/literal}{the_url module=root-url}{literal}";
            $(document).ready(function() {
		
		cropping();
                autoresizeMobileGallery();
                
                
                
                
                //SIDEBAR EFFECT
                    //toogle sidebar
                    $("#menu-toggle").click(function(e) {
                        e.preventDefault();
                        $("#wrapper").toggleClass("toggled");
                    });                
                    //Enable swiping...
//                    $( "#wrapper" ).on( "swipe", function() {
//			$("#wrapper").toggleClass("toggled");
//		    } );
                
                //OTHER
                $('.mobile-horizon-slider ul').each(function() {
                    $(this).width($(this).find('li').length*155);
                });

                
                
                //Gallery
                initMobileGallery();
                
                //Cart COut
                getCartCount();
		
		
		//for login page
		$("#LoggingFrm").validate();
		$("#checkout-meminfo").validate();
		
		
		
		//--------------TOP SEARCH ACTIONS------------------------//
        
		$('.top-search-form .dropdown-menu li').click(function() {
		    $('.top-search-type').removeClass("shop","fins");
		    $('.top-search-type').addClass($(this).attr("icon-rel"));
		    $('.top-search-type').attr("rel",$(this).attr("rel"));
		    $('.top-search-input').attr("placeholder",$(this).attr("holder-rel"));
		    
		    goSearch();
		});            
		$('.top-search-input').on("keyup", function(event){
		    if (event.keyCode == 13) {
			if($('.top-search-type').attr("rel")=='product') {
			    window.location = ROOT_URL+"index.php?do=product&level=search&keyword="+$('#top-search-input').val();
			}
		    }
		    $('.top-search-input').val($(this).val());
		    goSearch();
		});
		$('.top-search-input').on("focus", function(event){
		    goSearch();
		});
		$('.navbar-header').on("click", function(event){
		    hideSearch();
		});
		$('.top-search-bg').on("click", function(event){
		    goSearch();
		});
		$('.wrapper-search').on("mouseup", function(event){
		    $("#search-panel input").blur();
		});
		
		///////////////////////////////////////////////////////////
		
		
		
		
            });
	    
	    
	    
        </script>
    {/literal}